~~~shell
#查看所有进程
ps aux
pa ajx
ps -le
ps -Lf [pid]
# ps aux 是使用的Unix系统的查看方式，但是在Linux中同样适用，a参数表示查看所有前台进程，x表示查看所有后台进程，u表示进程是那个用户产生的
# ps ajx 显示与作业相关的数据
# ps -le 是使用 Linux 标准命令格式，-l参数显示详细的信息，-e显示所有的进程
# ps -Lf [pid] 是查看对应进程的线程，LWP 列显示线程号，NLWP列显示该进程一个有多少个线程（包含主线程在内）

# ps aux查看进程显示的信息是USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND
# USER: 进程拥有者
# PID: 进程的pid，适用kill杀死进程就是使用的pid
# %CPU: 占用的 CPU 使用率
# %MEM: 占用的物理内存使用率
# VSZ: 占用的虚拟内存大小，单位是KB
# RSS: 占用的物理内存大小，单位是KB
# TTY: 终端装置号码，系统产生的进程终端一般都是? 而本地的终端是tty1到tty7，其中tty7是图像终端，tty1到tty6是图像终端。pst0到pst255是远程虚拟终端
# STAT: 该进程的状态，可以包含多个状态
##      状态D: 无法中断的休眠状态 (通常 IO 的进程)
##      状态R: 正在执行中
##      状态S: 睡眠状态
##      状态T: 暂停执行
##      状态Z: 僵尸进程。进程已经中止，但是部分程序还在内存当中。
##      状态W: 没有足够的内存分页可分配
##      状态X：死掉的进程（应该不会出现）。
##      状态<: 高优先序的行程
##      状态N: 低优先序的行程
##      状态L: 有内存分页分配并锁在内存体内 (实时系统或捱A I/O)
##      状态s: 包含子进程
##      状态l：多线程
##      状态+: 进程在后台
# START: 进程开始时间
# TIME: 进程执行占用cpu的时间
# COMMAND:产生此进程的命令


# ps ajx查看进程显示的信息是 PPID  PID  PGID  SID TTY TPGID STAT UID TIME COMMAND
# PPID	父进程的 ID；
# PID	进程的 ID；
# PGID	进程所属的进程组的 ID；
# SID   进程的会话ID；
# TTY	产生该进程的终端；
# TPGID tty进程组负责人的进程组ID
# STAT: 该进程的状态，可以包含多个状态，详细见ps aux中的解释
# UID	运进此进程的用户的 ID；
# TIME	该进程占用 CPU 的运算时间，注意不是系统时间；
# COMMAND:产生此进程的命令



# ps -le查看进程显示的信息是F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD
# F	进程标志，说明进程的权限，常见的标志有两个:
##    1：进程可以被复制，但是不能被执行；
##    4：进程使用超级用户权限；
# S	进程状态。具体的状态和"ps aux"命令中的 STAT 状态一致；
# UID	运行此进程的用户的 ID；
# PID	进程的 ID；
# PPID	父进程的 ID；
# C	该进程的 CPU 使用率，单位是百分比；
# PRI	进程的优先级，数值越小，该进程的优先级越高，越早被 CPU 执行；
# NI	进程的优先级，数值越小，该进程越早被执行；
# ADDR	该进程在内存的哪个位置；
# SZ	该进程占用多大内存；
# WCHAN	该进程是否运行。"-"代表正在运行；
# TTY	产生该进程的终端；
# TIME	该进程占用 CPU 的运算时间，注意不是系统时间；
# CMD	产生此进程的命令

# 查看jave进程的PID，方式一
jps 
# -l参数输出应用程序main class的完整package名或者应用程序的jar文件完整路径名
# 查看jave进程的PID，方式二
ps ax | grep "java"
ps -ef | grep "java"
# 其实显示的是进程启动命令中带有java字符串的进程信息，注意例如sh -c java oil-site-boot-encrypted.jar这种sh进程也会显示

# 查看进程树，centos 安装 yum -y install psmisc
pstree
# -p参数显示进程的PID
# -u参数显示进程的所属用户

# 根据PID杀死进程，注意如果杀死父进程那么子进程也会一并杀死
kill
# -s参数指定要发送的信号编号，可以是信号名称或者信号编号
# -l参数表示列出所有的信号代号和信号的名称，常见的信号如下
# 信号代号1，信号的名称SIGHUP，该信号表示让进程立即终止，然后重新读取配置文件之后重启，service 服务名 restart其实就是调用的这个信号
# 信号代号2，信号的名称SIGINT，该信号表示结束进程，但并不是强制性的，用于终止前台进程常用的 "Ctrl+C" 组合键发出就是一个 kill -2 的信号。
# 信号代号9，信号的名称SIGKILL，该信号表示杀死进程，该信号不能被阻塞、处理和忽略，即强制结束进程。
# 信号代号15，信号的名称SIGTERM，该信号表示正常终止进程，默认使用 kill pid 就是使用kill -15 pid 杀死指定的pid的进程

# 根据进程名杀死进程，注意这个进程名是使用pstree看到的进程名
killall -9 [进程名]
# -i参数表示交互式会每个匹配进程名的进程都询问你是否杀死
# -I参数表示忽略进程名的大小写，只要匹配就杀死

# 根据进程名杀死进程，注意这个进程名是使用pstree看到的进程名
pkill -9 [进程名]
# -t参数表示tty终端，例如 pkill -9 -t pst1 执行这条命令表示将在pst1这个远程终端登录的用户踢出登录

# 查看进程打开或调用了那些文件
lsof [参数]
# -c参数表示通过字符串（其实就是使用进程启动命令，并不是完全匹配只是匹配命令的前面一部分）的方式来查看进程占用了那些文件
# -u参数表示通过用户名查看该用户开启的进程占用了那些文件
# -p参数表示通过进程的PID查看进程占用了那些文件

# 查看系统的健康状态
top
# 显示的信息每3秒刷新一次，类似于window是任务管理器，显示的信息分为两部分，第一部分是前5行，第二部分是表格默认显示进程占用CPU的排行榜
# 第一部分的内容如下
top - 12:26:46 up 1 day, 13:32, 2 users, load average: 0.00, 0.00, 0.00
Tasks: 95 total, 1 running, 94 sleeping, 0 stopped, 0 zombie
Cpu(s): 0.1%us, 0.1%sy, 0.0%ni, 99.7%id, 0.1%wa, 0.0%hi, 0.1%si, 0.0%st
Mem: 625344k total, 571504k used, 53840k free, 65800k buffers
Swap: 524280k total, 0k used, 524280k free, 409280k cached
# 第一行的信息是任务队列信息，12:26:46是系统的当前时间，up 1 day, 13:32是系统的运行时间本机已经运行了1天13小时32分钟，2 users表示当前登录了两个用户，load average: 0.00,0.00，0.00 表示系统在之前 1 分钟、5 分钟、15 分钟的平均负载。如果 CPU 是单核的，则这个数值超过 1 就是高负载：如果 CPU 是四核的，则这个数值超过 4 就是高负载 （这个平均负载完全是依据个人经验来进行判断的，一般认为不应该超过服务器 CPU 的核数）
# 第二行为进程信息，Tasks: 95 total表示系统中的进程总数，1 running表示正在运行的进程数，94 sleeping表示睡眠的进程数，0 stopped表示正在停止的进程数，0 zombie表示僵尸进程数。如果不是 0，则需要手工检查僵尸进程
# 第三行为 CPU 信息，Cpu(s): 0.1 %us表示用户模式占用的 CPU 百分比，0.1%sy表示系统模式占用的 CPU 百分比，0.0%ni表示改变过优先级的用户进程占用的 CPU 百分比，99.7%id表示空闲 CPU 占用的 CPU 百分比，0.1%wa表示等待输入/输出的进程占用的 CPU 百分比，0.0%hi表示硬中断请求服务占用的 CPU 百分比，0.1%si表示软中断请求服务占用的 CPU 百分比，0.0%st表示虚拟时间百分比，就是当有虚拟机时，虚拟 CPU 等待实际 CPU 的时间百分比
# 第四行为物理内存信息，Mem: 625344k total表示物理内存的总量，单位为KB（或者它会告诉你单位），571504k used表示已经使用的物理内存，53840k free表示空闲的物理内存，65800k buffers表示缓冲区的大小
# 第五行为交换分区（swap）信息，Swap: 524280k total表示交换分区的总量，0k used表示已经使用的swap分区容量，524280k free表示空闲的swap分区容量，409280k cached表示作为缓存的交换分区的大小
# 总结一下就是重点查看：第一行的系统负载、第二行的僵尸进程数、第三行的cpu空闲百分比、第四行的空闲内存大小
# -d参数指定显示的信息每多少秒刷新一次，默认是3秒
# 在top命令的交换模式下可以执行的命令
# 按?或者h会显示交互模式的帮助信息，在按q会退到top命令的交换模式
# 按P会将top命令显示的第二部分的表格为进程占用CPU的排行榜（这是默认的）
# 按M会将top命令显示的第二部分的表格为进程占用内存的排行榜
# 按N会将top命令显示的第二部分的表格为进程以PID排序（从大到小）
# 按q会退出top命令

# 查看监控系统资源
vmstat [间隔时间] [监控次数]
# 例如 vmstat 2 5 执行这条命令的意思是监听系统资源5次，每两次之间间隔2s
# 该命令输出信息中，各个字段以及含义如下
# procs	进程信息字段：
##      -r：等待运行的进程数，数量越大，系统越繁忙。
##      -b：不可被唤醒的进程数量，数量越大，系统越繁忙。
# memory 内存信息字段：
##      -swpd：虚拟内存的使用情况，单位为 KB。
##      -free：空闲的内存容量，单位为 KB。
##      -buff：缓冲的内存容量，单位为 KB。
##      -cache：缓存的内存容量，单位为 KB。
# swap 交换分区信息字段：
##      -si：从磁盘中交换到内存中数据的数量，单位为 KB，数字越大，表明数据需要经常在磁盘和内存之间进行交换，系统性能越差。
##      -so：从内存中交换到磁盘中数据的数量，单位为 KB，数字越大，表明数据需要经常在磁盘和内存之间进行交换，系统性能越差。
# io 磁盘读/写信息字段：这两个字段
##      -bi：从块设备中读入的数据的总量，单位是块，数字越大，代表系统的 I/O 越繁忙。
##      -bo：写到块设备的数据的总量，单位是块，数字越大，代表系统的 I/O 越繁忙。
# system 系统信息字段：
##      -in：每秒被中断的进程次数，数字越大，代表系统与接口设备的通信越繁忙。
##      -cs：每秒进行的事件切换次数，数字越大，代表系统与接口设备的通信越繁忙。
# cpu CPU信息字段：
##      -us：非内核进程消耗 CPU 运算时间的百分比。
##      -sy：内核进程消耗 CPU 运算时间的百分比。
##      -id：空闲 CPU 的百分比。
##      -wa：等待 I/O 所消耗的 CPU 百分比。
##      -st：被虚拟机所盗用的 CPU 百分比。



# 将程序放入后台方式一：在启动程序时在命令的最后添加&，程序会在后台继续启动运行，例如 serivce [服务名] start & 或者是 java -jar test.jar &
# 将程序放入后台方式二：在启动程序后使用Ctrl+z，程序会暂停并放入后台，例如 top 命令进入交互模式，Ctrl+z会将top暂停并放入后台

# 查看后台的工作
jobs
# -l参数显示程序的pid，具体信息如下
[1]- 10346 Stopped                 vi 备忘注意事项.txt
[2]+ 12147 Stopped (signal)        top
# 第一列的[数字]+ 数字表示的是工作号，例如第一个放入后台的程序工作号是1，第二个放入后台的程序工作号就是2。+代表的是倒数第一个放入后台的程序，-代表倒数第二个放入后台的程序，其他的没有符号表示。
# 第二列的数字，例如10346和12147分别代表vi进程和top进程的PID。
# 第三列表示进程的状态
# 第四列表示程序的启动命令

# 恢复后台的工作到前台工作运行
fg %[工作号]
# 例如 fg %1 恢复工作号1的工作到前台

# 恢复后台的工作到后台工作运行
bg %[工作号]
# 例如 bg %1 恢复工作号1的工作到后台运行
# 注意后台恢复的执行命令，是不能与前台有交互的，这些命令是无法恢复到后台运行的，与前台有交互的命令例如vi、vim、top、fdisk进行分区等命令
~~~
---
## JLS与JVMS
- Java语⾔规范 Java Language Specification 定义Java语⾔的语法
- Java虚拟机规范 JVM Specification 定义字节码如何在JVM中运⾏
---

# JVM的运⾏时内存区域
- ### 堆
  所有的对象都在堆上分配
  你只能操作对象的引⽤（地址）
  你只能控制对象的诞⽣，但是⽆法控制它的死亡
- ### ⽅法栈
  线程私有
  每当⼀个⽅法调⽤发⽣，⽅法就⼊栈⼀个栈帧
  每当⽅法退出（返回或者异常），栈帧就被弹出
  局部变量在栈帧中分配
  当栈深度过⼤时抛出StackOverflowError
- ### 本地⽅法栈
  基本上接触不到
- ### 栈帧
  局部变量表
  操作数栈
- ### ⽅法区
- ### 被整个虚拟机所共享的Class信息
- ### 运⾏时常量池
- ### Java7之前：永久代（PermGen）
  - OutOfMemory: Perm gen
  - 与堆放在一起，占用了堆的空间
- ### Java8之后：元空间（Metaspace）
  - 元空间和Native共享内存

--- 


# 查看和阅读字节码
  - javap
  - 图形化⼯具
  - 反编译器 

# 类加载器
  - 类加载器是JVM的灵魂
  - 类加载器打通了代码和数据间的障碍
  - 动态加载代码
  - 动态⽣成代码
  - 动态替换代码
  - 使⽤场景
    - Mock
    - AOP
    - 热部署/热替换 
---

# 双亲委派加载模型（Java8） 
### 为什么需要有双亲委派加载模型？
安全性：你不希望加载⼀个恶意的字节码吧？  
正确性：类加载也被instanceof所检查  

 

 

 

 

 
# 常见的协议如下
### 应用层
- HTTP协议，又叫超文本传输协议，是互联网应用最广泛的网络协议
- FTP协议，又叫文本传输协议，用于跨操作系统进行文件传输
- RPC协议，远程调用协议
- DNS协议，域名解析协议
### 传输层
- TCP协议，又叫传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议，TCP数据包有序号和确认序号两块空间（两块空间都是4字节）保证数据传输的可靠性，通过序号来控制数据包的顺序，通过确认序号判断数据包的丢失，是否需要重新传输
- UDP协议，又叫用户数据报协议，是OSI参考模型中一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务
### 网络层
- IP协议，又叫因特尔互联网协议，用于标识设备在互联网上的地址
- ICMP协议，又叫 Internet 控制报文协议，是tcp/IP协议族的一个子协议，用于在IP主机、路由器之间传递控制消息
- IGMP协议，又叫 Internet 组管理协议，是因特网协议家族中的一个组播协议，该协议运行在主机和组播路由器之间
### 网络接口层（也叫数据链路层）
- ARP协议，又叫正向地址解析协议，通过已知的IP，寻找对应主机的MAC地址，在网络通讯时，源主机的应用程序知道目的主机的IP地址和端口号，却不知道目的主机的硬件地址，而数据包首先是被网卡接收到再去处理上层协议的，如果接收到的数据包的硬件地址与本机不符，则直接丢弃。因此在通讯前必须获得目的主机的硬件地址。
  - 在主机 ARP 高速缓存中存放一个从 IP 地址到硬件地址的映射表，并且这个映射表经常动态更新。每一台主机都设有一个 ARP 高速缓存(ARP Cache)，里面有本局域网上的各主机和路由器的 IP 地址到硬件地址的映射表(并且每一个映射地址都设置有生存时间)，如果缓存中没有对应的ip地址的mac地址会通过广播地址去发送数据包询问局域网内所有的主机谁有这个IP地址，拥有ip地址的机器进行回答ip地址和自己的mac地址
- RARP，又叫反向地址转换，通过MAC地址确定IP地址

# 粘包问题的解决
方案一：使用包头加数据，在包头中标明数据的长度
方案二：使用特殊的符号做为数据的结尾，当然如果需要正常使用特殊符号需要设置转义规则
方案三：使用固定长度的包，发送方和接收方都遵循这个规则

# 长连接和短连接
长连接：服务端和客户端建立好连接之后，一直保持不关闭连接，并且使用心跳保证连接正常，如果不正常会进行重新连接
长连接：服务端和客户端建立好的连接，使用完就直接关闭连接

# 心跳
心跳用于检测连接是否正常，例如 客户端发送数据包 aaaa，然后服务端返回 bbbb，那么客户端认为心跳正常连接没有问题，如果客户端没有收到服务端返回的 bbb 则认为心跳异常连接有问题，会进行close关闭连接，然后重新建立连接，继续检测心跳

# 如何保证心跳数据和正常的业务数据不混淆
解决方案是客户端和服务端自行定义协议，例如 定义数据包的格式是 包头 + 特殊的分隔 + 数据， 在包头的指定位置中定义数据的长度，例如定义包头的前4个字节是数据的长度，那么服务端和客户端都按照包头的数据长度去获取数据，而数据如果是 aaaa 或者是 bbbb 那么就认为是心跳数据包，其他的数据就按照对应的业务进行解析

# TCP三次握手
- 客户端发送数据包携带 syn（请求连接标志）seq=x (x是序号)
- 服务端接收到客户端发送的数据包后，返回给客户端一个数据包携带 syn（请求连接标志）seq=y (y是序号) 以及响应 ack=x+1
- 客户端再次发送数据包携带 ack=y+1 seq=x+1 